<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports & Analytics - Office Pantry Management System</title>
    <link rel="stylesheet" href="reports-analytics.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="logo-text">
                    <h1>Office Pantry</h1>
                    <span class="role-badge">Administrator</span>
                </div>
            </div>
            
            <nav class="header-nav">
                <a href="admin-dashboard.html" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-boxes"></i>
                    Inventory
                </a>
                <a href="consumption-log.html" class="nav-link">
                    <i class="fas fa-clipboard-list"></i>
                    Consumption Log
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-users"></i>
                    Users
                </a>
                <a href="#" class="nav-link active">
                    <i class="fas fa-chart-line"></i>
                    Reports
                </a>
            </nav>
            
            <div class="header-actions">
                <div class="notification-bell">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count" id="notificationCount">1</span>
                </div>
                <div class="user-profile">
                    <img src="https://via.placeholder.com/40x40/667eea/ffffff?text=A" alt="Admin Avatar" class="avatar">
                    <span class="user-name">Admin User</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-container">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-title">
                    <h2>Reports & Analytics</h2>
                    <p class="page-subtitle">Comprehensive insights into pantry consumption patterns</p>
                </div>
                <div class="page-actions">
                    <button class="btn btn-secondary" id="refreshReportsBtn">
                        <i class="fas fa-sync-alt"></i>
                        Refresh Data
                    </button>
                    <button class="btn btn-primary" id="exportReportBtn">
                        <i class="fas fa-download"></i>
                        Export Report
                    </button>
                </div>
            </div>

            <!-- Filters Section -->
            <div class="filters-container">
                <div class="filters-card">
                    <div class="filters-header">
                        <h3>Report Filters</h3>
                        <button class="btn btn-sm btn-secondary" onclick="resetFilters()">
                            <i class="fas fa-undo"></i>
                            Reset
                        </button>
                    </div>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="dateRange" class="filter-label">
                                <i class="fas fa-calendar-alt"></i>
                                Date Range
                            </label>
                            <select id="dateRange" class="filter-select" onchange="handleDateRangeChange()">
                                <option value="today">Today</option>
                                <option value="yesterday">Yesterday</option>
                                <option value="thisWeek" selected>This Week</option>
                                <option value="lastWeek">Last Week</option>
                                <option value="thisMonth">This Month</option>
                                <option value="lastMonth">Last Month</option>
                                <option value="thisQuarter">This Quarter</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>

                        <div class="filter-group" id="customDateGroup" style="display: none;">
                            <label for="startDate" class="filter-label">
                                <i class="fas fa-calendar-day"></i>
                                Start Date
                            </label>
                            <input type="date" id="startDate" class="filter-input" onchange="updateCustomRange()">
                        </div>

                        <div class="filter-group" id="customDateGroup2" style="display: none;">
                            <label for="endDate" class="filter-label">
                                <i class="fas fa-calendar-day"></i>
                                End Date
                            </label>
                            <input type="date" id="endDate" class="filter-input" onchange="updateCustomRange()">
                        </div>

                        <div class="filter-group">
                            <label for="itemFilter" class="filter-label">
                                <i class="fas fa-box"></i>
                                Item Type
                            </label>
                            <select id="itemFilter" class="filter-select" onchange="applyFilters()">
                                <option value="all">All Items</option>
                                <option value="beverages">Beverages</option>
                                <option value="snacks">Snacks</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="userFilter" class="filter-label">
                                <i class="fas fa-user"></i>
                                User
                            </label>
                            <select id="userFilter" class="filter-select" onchange="applyFilters()">
                                <option value="all">All Users</option>
                                <option value="john-doe">John Doe</option>
                                <option value="jane-smith">Jane Smith</option>
                                <option value="mike-johnson">Mike Johnson</option>
                                <option value="sarah-wilson">Sarah Wilson</option>
                                <option value="guest">Guest Users</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="sortBy" class="filter-label">
                                <i class="fas fa-sort"></i>
                                Sort By
                            </label>
                            <select id="sortBy" class="filter-select" onchange="applyFilters()">
                                <option value="date">Date (Newest First)</option>
                                <option value="quantity">Quantity (High to Low)</option>
                                <option value="item">Item Name</option>
                                <option value="user">User Name</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="summary-container">
                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Total Items</h4>
                            <div class="summary-value" id="totalItems">0</div>
                            <div class="summary-change" id="totalItemsChange">
                                <i class="fas fa-arrow-up"></i>
                                <span>+0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Active Users</h4>
                            <div class="summary-value" id="activeUsers">0</div>
                            <div class="summary-change" id="activeUsersChange">
                                <i class="fas fa-arrow-up"></i>
                                <span>+0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Most Popular</h4>
                            <div class="summary-value" id="mostPopular">-</div>
                            <div class="summary-change" id="mostPopularChange">
                                <i class="fas fa-arrow-up"></i>
                                <span>0 items</span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-calendar-week"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Avg. Daily</h4>
                            <div class="summary-value" id="avgDaily">0</div>
                            <div class="summary-change" id="avgDailyChange">
                                <i class="fas fa-arrow-up"></i>
                                <span>+0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-container">
                <div class="charts-grid">
                    <!-- Consumption Distribution Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Consumption Distribution</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="pie" onclick="changeChartType('consumptionChart', 'pie')">
                                    <i class="fas fa-chart-pie"></i>
                                </button>
                                <button class="chart-btn" data-type="doughnut" onclick="changeChartType('consumptionChart', 'doughnut')">
                                    <i class="fas fa-chart-pie"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="consumptionChart" width="400" height="300"></canvas>
                        </div>
                    </div>

                    <!-- Daily Trends Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Daily Consumption Trends</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="line" onclick="changeChartType('trendsChart', 'line')">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button class="chart-btn" data-type="bar" onclick="changeChartType('trendsChart', 'bar')">
                                    <i class="fas fa-chart-bar"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="trendsChart" width="400" height="300"></canvas>
                        </div>
                    </div>

                    <!-- User Activity Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>User Activity</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="bar" onclick="changeChartType('userChart', 'bar')">
                                    <i class="fas fa-chart-bar"></i>
                                </button>
                                <button class="chart-btn" data-type="horizontalBar" onclick="changeChartType('userChart', 'bar', true)">
                                    <i class="fas fa-chart-bar"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="userChart" width="400" height="300"></canvas>
                        </div>
                    </div>

                    <!-- Time-based Analysis -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Hourly Consumption</h3>
                            <div class="chart-controls">
                                <button class="btn btn-sm btn-secondary" onclick="toggleTimeView()">
                                    <i class="fas fa-clock"></i>
                                    Toggle View
                                </button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="timeChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Table Section -->
            <div class="table-container">
                <div class="table-card">
                    <div class="table-header">
                        <h3>Detailed Consumption Data</h3>
                        <div class="table-controls">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="tableSearch" placeholder="Search entries..." onkeyup="filterTable()">
                            </div>
                            <select id="pageSize" class="page-size-select" onchange="changePageSize()">
                                <option value="10">10 per page</option>
                                <option value="25" selected>25 per page</option>
                                <option value="50">50 per page</option>
                                <option value="100">100 per page</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table class="data-table" id="dataTable">
                            <thead>
                                <tr>
                                    <th onclick="sortTable('date')" class="sortable">
                                        Date
                                        <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('item')" class="sortable">
                                        Item
                                        <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('quantity')" class="sortable">
                                        Quantity
                                        <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('user')" class="sortable">
                                        User
                                        <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('time')" class="sortable">
                                        Time
                                        <i class="fas fa-sort"></i>
                                    </th>
                                    <th>Notes</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- Table data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                        <div class="table-info">
                            <span id="tableInfo">Showing 0 to 0 of 0 entries</span>
                        </div>
                        <div class="pagination" id="pagination">
                            <!-- Pagination will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Export Options Modal -->
            <div class="modal" id="exportModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Export Report</h3>
                        <button class="close-btn" onclick="closeExportModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="export-options">
                            <div class="export-option">
                                <label class="export-label">
                                    <input type="radio" name="exportFormat" value="pdf" checked>
                                    <span class="export-radio"></span>
                                    <div class="export-content">
                                        <i class="fas fa-file-pdf"></i>
                                        <div>
                                            <h4>PDF Report</h4>
                                            <p>Professional formatted report with charts and tables</p>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <div class="export-option">
                                <label class="export-label">
                                    <input type="radio" name="exportFormat" value="excel">
                                    <span class="export-radio"></span>
                                    <div class="export-content">
                                        <i class="fas fa-file-excel"></i>
                                        <div>
                                            <h4>Excel Spreadsheet</h4>
                                            <p>Raw data in spreadsheet format for further analysis</p>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <div class="export-option">
                                <label class="export-label">
                                    <input type="radio" name="exportFormat" value="csv">
                                    <span class="export-radio"></span>
                                    <div class="export-content">
                                        <i class="fas fa-file-csv"></i>
                                        <div>
                                            <h4>CSV File</h4>
                                            <p>Comma-separated values for data import</p>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="export-settings">
                            <h4>Export Settings</h4>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="includeCharts" checked>
                                    Include Charts and Visualizations
                                </label>
                            </div>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="includeSummary" checked>
                                    Include Summary Statistics
                                </label>
                            </div>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="includeRawData" checked>
                                    Include Raw Data Table
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" onclick="closeExportModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="executeExport()">
                            <i class="fas fa-download"></i>
                            Export Report
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Generating Report...</p>
        </div>
    </div>

    <script src="reports-analytics.js"></script>
</body>
</html>


